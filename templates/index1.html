<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>PlacePredictor</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

   <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
    :root {
      --primary-color: #4e8cff;
      --secondary-color: #6c757d;
      --success-color: #29d09c;
      --danger-color: #ff4b5c;
      --warning-color: #ffc107;
      --dark-color: #1a1a1a;
      --light-color: #f9fafc;
      --gradient-primary: linear-gradient(135deg, #4e8cff, #1e2a78);
      --glass-bg: rgba(44, 62, 80, 0.95);
      --glass-border: rgba(255, 255, 255, 0.15);
      --shadow-deep: 0 10px 30px rgba(0, 0, 0, 0.25);
    }

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #dff6ff, #b9e6ed);
      color: var(--dark-color);
    }

    /* Menu Button */
    .menu-btn {
      position: fixed;
      top: 20px;
      left: 10px;
      background: var(--gradient-primary);
      border: none;
      color: white;
      font-size: 1.2rem;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
      z-index: 1001;
      box-shadow: var(--shadow-deep);
      transition: transform 0.3s ease;
    }
    .menu-btn:hover { transform: scale(1.1); }

    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 0;
      overflow-x: hidden;
      backdrop-filter: blur(12px);
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      box-shadow: var(--shadow-deep);
      transition: width 0.3s ease;
      z-index: 1000;
      padding-top: 60px;
    }
    .sidebar.open { width: 220px; padding: 60px 10px; }
    .sidebar a {
      display: block;
      color: #fff;
      text-decoration: none;
      padding: 12px 15px;
      margin-bottom: 5px;
      border-radius: 6px;
      transition: background 0.3s;
    }
    .sidebar a:hover { background: rgba(255,255,255,0.1); }

    .card.text-center {
      text-align: center;
      color: rgb(5, 2, 212);
      background-color: #e7ebf3;
      box-shadow: #4e8cff;
    }

    /* Cards */
    .card {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 15px;
      box-shadow: var(--shadow-deep);
      padding: 1.5rem;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
    }

    h1, h2, h3, h4, h5 { font-weight: 700; color: rgb(0, 0, 0); }

  .card.text-center.p-3.shadow-sm {
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 20px;
    background: #198754;
    --gradient-success: linear-gradient(135deg, #198754 0%, #032f1a 100%);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    border-radius: 20px;
    color:black;
  }
    .card.text-center.p-3.shadow-sd {
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 20px;
    background-color: #0dcaf0;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    border-radius: 20px;
    color: black;
  }
    .card.text-center.p-3.shadow-sp {
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 20px;
    background-color: #0d6efd;
    --gradient-primary: linear-gradient(135deg, #0d6efd 0%, #0a3473 100%);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    border-radius: 20px;
    color: black;
  }
 
</style>



</head>
<body class="bg-light">
<!-- Navbar -->
<!-- <nav class="navbar navbar-dark bg-dark fixed-top px-3"> -->
<nav>
    <button class="menu-btn" id="menuBtn">☰</button>
</nav>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <a href="{{ url_for('index') }}">Home</a>
    <a href="{{ url_for('dashboard') }}">Dashboard</a>
    <a href="{{ url_for('resume_index') }}">Resume Analyzer</a>
    <a href="{{ url_for('github_index') }}">GitHub Analyzer</a>
    <a href="{{ url_for('chatbot') }}">Chatbot</a>
    <a href="{{ url_for('about') }}">ℹ About Us</a>
</div>
<div class="container py-5">
    <h1 class="text-center mb-4">Placement & Salary Prediction</h1>

    <!-- Stats Cards -->
    <div class="row g-4 mb-4">
        <div class="col-md-4">
            <div class="card text-center p-3 shadow-sm">
                <h5>Placement Rate</h5>
                <p class="display-6">{{ stats.placement_rate }}%</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center p-3 shadow-sd">
                <h5>Average Salary</h5>
                <p class="display-6">₹{{ stats.average_salary }}</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center p-3 shadow-sp">
                <h5>Total Predictions</h5>
                <p class="display-6">{{ stats.total_students }}</p>
            </div>
        </div>
    </div>

    <!-- Charts -->
    <div class="row g-4 mb-4">
        <div class="col-md-6">
            <canvas id="placementChart"></canvas>
        </div>
        <div class="col-md-6">
            <canvas id="salaryChart"></canvas>
        </div>
    </div>

    <!-- Prediction Form -->
    <div class="card p-4 shadow-sm mb-4">
        <h4 class="mb-3">Predict Placement & Salary</h4>
        <form id="predictionForm">
            <!-- Placement Inputs -->
            <h5>Placement Inputs</h5>
            <input type="text" name="College_ID" placeholder="College ID" class="form-control mb-2" required>
            <input type="text" name="IQ" placeholder="IQ" class="form-control mb-2" required>
            <input type="text" name="Prev_Sem_Result" placeholder="Previous Semester Result" class="form-control mb-2" required>
            <input type="text" name="CGPA" placeholder="CGPA" class="form-control mb-2" required>
            <input type="text" name="Academic_Performance" placeholder="Academic Performance" class="form-control mb-2" required>
            <input type="text" name="Internship_Experience" placeholder="Internship Experience" class="form-control mb-2" required>
            <input type="text" name="Extra_Curricular_Score" placeholder="Extra Curricular Score" class="form-control mb-2" required>
            <input type="text" name="Communication_Skills" placeholder="Communication Skills" class="form-control mb-2" required>
            <input type="text" name="Projects_Completed" placeholder="Projects Completed" class="form-control mb-2" required>

            <!-- Salary Inputs -->
            <h5 class="mt-3">Salary Prediction Inputs</h5>
            <input type="text" name="Name_of_Student" placeholder="Name of Student" class="form-control mb-2" required>
            <input type="text" name="Roll_No" placeholder="Roll No." class="form-control mb-2" required>
            <input type="text" name="No_of_DSA_questions" placeholder="No. of DSA Questions" class="form-control mb-2" required>
            <input type="text" name="CGPA2" placeholder="CGPA" class="form-control mb-2" required>
            <input type="text" name="Knows_ML" placeholder="Knows ML (0 or 1)" class="form-control mb-2" required>
            <input type="text" name="Knows_DSA" placeholder="Knows DSA (0 or 1)" class="form-control mb-2" required>
            <input type="text" name="Knows_Python" placeholder="Knows Python (0 or 1)" class="form-control mb-2" required>
            <input type="text" name="Knows_JavaScript" placeholder="Knows JavaScript (0 or 1)" class="form-control mb-2" required>
            <input type="text" name="Knows_HTML" placeholder="Knows HTML (0 or 1)" class="form-control mb-2" required>
            <input type="text" name="Knows_CSS" placeholder="Knows CSS (0 or 1)" class="form-control mb-2" required>
            <input type="text" name="Knows_Cricket" placeholder="Knows Cricket (0 or 1)" class="form-control mb-2" required>
            <input type="text" name="Knows_Dance" placeholder="Knows Dance (0 or 1)" class="form-control mb-2" required>
            <input type="text" name="Participated_in_College_Fest" placeholder="Participated in College Fest (0 or 1)" class="form-control mb-2" required>
            <input type="text" name="Was_in_Coding_Club" placeholder="Was in Coding Club (0 or 1)" class="form-control mb-2" required>
            <input type="text" name="No_of_backlogs" placeholder="No. of Backlogs" class="form-control mb-2" required>
            <input type="text" name="Interview_Room_Temperature" placeholder="Interview Room Temperature" class="form-control mb-2" required>
            <input type="text" name="Age_of_Candidate" placeholder="Age of Candidate" class="form-control mb-2" required>
            <input type="text" name="Branch_of_Engineering" placeholder="Branch of Engineering (e.g., CSE = 0)" class="form-control mb-2" required>

            <button type="submit" class="btn btn-primary w-100">Predict</button>
        </form>
    </div>

    <!-- Prediction Results -->
    <div class="card p-4 shadow-sm">
        <h3>Prediction Results</h3>
        <div id="predictionResult"></div>
    </div>
</div>

<!-- JS for Charts -->
<script>
    const placementData = JSON.parse('{{ charts.placement_distribution | tojson | safe }}');
    const salaryData = JSON.parse('{{ charts.salary_distribution | tojson | safe }}');

    new Chart(document.getElementById('placementChart'), {
        type: 'pie',
        data: {
            labels: placementData.labels,
            datasets: [{ data: placementData.values, backgroundColor: ['#4CAF50', '#F44336'] }]
        }
    });

    new Chart(document.getElementById('salaryChart'), {
        type: 'bar',
        data: {
            labels: salaryData.labels,
            datasets: [{ label: 'Average Salary (₹)', data: salaryData.values, backgroundColor: '#2196F3' }]
        }
    });

    // Handle form submission via fetch
    document.getElementById('predictionForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const formData = Object.fromEntries(new FormData(this).entries());

        fetch('/api/predict', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(formData)
        })
        .then(res => res.json())
      .then(result => {
        document.getElementById('predictionResult').innerHTML = `
        <p><strong>Placement Prediction:</strong> ${result.placement_prediction}</p>
        <p><strong>Predicted Salary:</strong> ₹${result.salary_prediction}</p>
        ${result.skill_suggestions?.length 
            ? `<h5>Suggestions:</h5><ul>${result.skill_suggestions.map(s => `<li>${s}</li>`).join('')}</ul>` 
            : ''}
        `;
      })

        .catch(err => {
            document.getElementById('predictionResult').innerText = "Error: Could not fetch prediction.";
            console.error(err);
        });
    });
</script>
<script>
  const menuBtn = document.getElementById('menuBtn');
  const sidebar = document.getElementById('sidebar');

  menuBtn.addEventListener('click', () => {
    sidebar.classList.toggle('open');
  });
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>